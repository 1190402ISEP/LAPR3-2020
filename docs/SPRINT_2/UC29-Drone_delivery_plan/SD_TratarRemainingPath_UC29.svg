<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="363px" preserveAspectRatio="none" style="width:1048px;height:363px;" version="1.1" viewBox="0 0 1048 363" width="1048.5px" zoomAndPan="magnify"><defs><filter height="300%" id="f124eobtegh7f1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.0" dy="2.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="306.0625" style="stroke:#A80036;stroke-width:0.5;" width="5" x="356" y="25.8047"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="469.5" y="52.1563"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="469.5" y="82.332"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="748.5" y="112.5078"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="748.5" y="142.6836"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="748.5" y="172.8594"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="748.5" y="203.0352"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="748.5" y="233.2109"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="944.5" y="263.3867"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="1001.75" y="316.8672"/><line style="stroke:#A80036;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="358.5" x2="358.5" y1="20.8047" y2="340.8672"/><line style="stroke:#A80036;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="471.75" x2="471.75" y1="20.8047" y2="340.8672"/><line style="stroke:#A80036;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="750.75" x2="750.75" y1="20.8047" y2="340.8672"/><line style="stroke:#A80036;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="861.75" x2="861.75" y1="20.8047" y2="340.8672"/><line style="stroke:#A80036;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="946.75" x2="946.75" y1="20.8047" y2="340.8672"/><line style="stroke:#A80036;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1004.25" x2="1004.25" y1="299.0391" y2="340.8672"/><rect fill="#FEFECE" filter="url(#f124eobtegh7f1)" height="15.8047" style="stroke:#A80036;stroke-width:0.75;" width="97" x="309" y="2.5"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="90" x="312.5" y="13.2666">:DroneDeliveryPlanningTask</text><rect fill="#FEFECE" filter="url(#f124eobtegh7f1)" height="15.8047" style="stroke:#A80036;stroke-width:0.75;" width="97" x="309" y="340.3672"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="90" x="312.5" y="351.1338">:DroneDeliveryPlanningTask</text><rect fill="#FEFECE" filter="url(#f124eobtegh7f1)" height="15.8047" style="stroke:#A80036;stroke-width:0.75;" width="79.5" x="431.25" y="2.5"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="72.5" x="434.75" y="13.2666">:remaining:List&lt;String&gt;</text><rect fill="#FEFECE" filter="url(#f124eobtegh7f1)" height="15.8047" style="stroke:#A80036;stroke-width:0.75;" width="79.5" x="431.25" y="340.3672"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="72.5" x="434.75" y="351.1338">:remaining:List&lt;String&gt;</text><rect fill="#FEFECE" filter="url(#f124eobtegh7f1)" height="15.8047" style="stroke:#A80036;stroke-width:0.75;" width="75.5" x="712.25" y="2.5"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="68.5" x="715.75" y="13.2666">plan:DeliveryPlanning</text><rect fill="#FEFECE" filter="url(#f124eobtegh7f1)" height="15.8047" style="stroke:#A80036;stroke-width:0.75;" width="75.5" x="712.25" y="340.3672"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="68.5" x="715.75" y="351.1338">plan:DeliveryPlanning</text><rect fill="#FEFECE" filter="url(#f124eobtegh7f1)" height="15.8047" style="stroke:#A80036;stroke-width:0.75;" width="132.5" x="794.75" y="2.5"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="125.5" x="798.25" y="13.2666">pesosPorEcomenda:Map&lt;String, Float&gt;</text><rect fill="#FEFECE" filter="url(#f124eobtegh7f1)" height="15.8047" style="stroke:#A80036;stroke-width:0.75;" width="132.5" x="794.75" y="340.3672"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="125.5" x="798.25" y="351.1338">pesosPorEcomenda:Map&lt;String, Float&gt;</text><rect fill="#FEFECE" filter="url(#f124eobtegh7f1)" height="15.8047" style="stroke:#A80036;stroke-width:0.75;" width="23.5" x="934.25" y="2.5"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="16.5" x="937.75" y="13.2666">:Print</text><rect fill="#FEFECE" filter="url(#f124eobtegh7f1)" height="15.8047" style="stroke:#A80036;stroke-width:0.75;" width="23.5" x="934.25" y="340.3672"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="16.5" x="937.75" y="351.1338">:Print</text><rect fill="#FEFECE" filter="url(#f124eobtegh7f1)" height="15.8047" style="stroke:#A80036;stroke-width:0.75;" width="77" x="964.75" y="340.3672"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="70" x="968.25" y="351.1338">stop:StopForCharging</text><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="306.0625" style="stroke:#A80036;stroke-width:0.5;" width="5" x="356" y="25.8047"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="469.5" y="52.1563"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="469.5" y="82.332"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="748.5" y="112.5078"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="748.5" y="142.6836"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="748.5" y="172.8594"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="748.5" y="203.0352"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="748.5" y="233.2109"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="944.5" y="263.3867"/><rect fill="#FFFFFF" filter="url(#f124eobtegh7f1)" height="15" style="stroke:#A80036;stroke-width:0.5;" width="5" x="1001.75" y="316.8672"/><polygon fill="#A80036" points="350,34.9805,355,36.9805,350,38.9805,352,36.9805" style="stroke:#A80036;stroke-width:0.5;"/><line style="stroke:#A80036;stroke-width:0.5;" x1="0" x2="353" y1="36.9805" y2="36.9805"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="3.5" y="34.5522">1</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="341" x="9" y="34.5522">tratarRemainingPath(remainingPath, droneID, pharmacyID, plan, pesosPorEncomenda, idDelivey, db, outputFileName)</text><polygon fill="#A80036" points="463.5,50.1563,468.5,52.1563,463.5,54.1563,465.5,52.1563" style="stroke:#A80036;stroke-width:0.5;"/><line style="stroke:#A80036;stroke-width:0.5;" x1="361" x2="466.5" y1="52.1563" y2="52.1563"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="364.5" y="49.728">2</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="90" x="370" y="49.728">actualFarmacia = removeFirst()</text><polygon fill="#A80036" points="463.5,80.332,468.5,82.332,463.5,84.332,465.5,82.332" style="stroke:#A80036;stroke-width:0.5;"/><line style="stroke:#A80036;stroke-width:0.5;" x1="361" x2="466.5" y1="82.332" y2="82.332"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="364.5" y="79.9038">3</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="93.5" x="370" y="79.9038">startingFarmacia = removeLast()</text><polygon fill="#A80036" points="742.5,110.5078,747.5,112.5078,742.5,114.5078,744.5,112.5078" style="stroke:#A80036;stroke-width:0.5;"/><line style="stroke:#A80036;stroke-width:0.5;" x1="361" x2="745.5" y1="112.5078" y2="112.5078"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="364.5" y="110.0796">4</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="266.5" x="370" y="110.0796">completeRemainingPath = ShortestPathDrone(remaining, actualFarmacia, startingFarmacia)</text><polygon fill="#A80036" points="742.5,140.6836,747.5,142.6836,742.5,144.6836,744.5,142.6836" style="stroke:#A80036;stroke-width:0.5;"/><line style="stroke:#A80036;stroke-width:0.5;" x1="361" x2="745.5" y1="142.6836" y2="142.6836"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="364.5" y="140.2554">5</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="85.5" x="370" y="140.2554">payload = getActualPayload()</text><polygon fill="#A80036" points="742.5,170.8594,747.5,172.8594,742.5,174.8594,744.5,172.8594" style="stroke:#A80036;stroke-width:0.5;"/><line style="stroke:#A80036;stroke-width:0.5;" x1="361" x2="745.5" y1="172.8594" y2="172.8594"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="364.5" y="170.4312">6</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="372.5" x="370" y="170.4312">gastoEnergeticoRestante = calculateEnergyCost(completeRemainingPath, payload, VehicleType.DRONE, pesosPorEncomenda)</text><polygon fill="#A80036" points="742.5,201.0352,747.5,203.0352,742.5,205.0352,744.5,203.0352" style="stroke:#A80036;stroke-width:0.5;"/><line style="stroke:#A80036;stroke-width:0.5;" x1="361" x2="745.5" y1="203.0352" y2="203.0352"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="364.5" y="200.6069">7</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="167.5" x="370" y="200.6069">distanciaRestante = pathWeight(completeRemainingPath)</text><polygon fill="#A80036" points="742.5,231.2109,747.5,233.2109,742.5,235.2109,744.5,233.2109" style="stroke:#A80036;stroke-width:0.5;"/><line style="stroke:#A80036;stroke-width:0.5;" x1="361" x2="745.5" y1="233.2109" y2="233.2109"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="364.5" y="230.7827">8</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="139" x="370" y="230.7827">tempoRestante = getSpentTimeLastDronePath()</text><polygon fill="#A80036" points="938.5,261.3867,943.5,263.3867,938.5,265.3867,940.5,263.3867" style="stroke:#A80036;stroke-width:0.5;"/><line style="stroke:#A80036;stroke-width:0.5;" x1="361" x2="941.5" y1="263.3867" y2="263.3867"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="3.5" x="364.5" y="260.9585">9</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="497" x="370" y="260.9585">printRemainingDeliveryPath(outputFileName, actualFarmacia, completeRemainingPath, gastoEnergeticoRestante, distanciaRestante, tempoRestante, VehicleType.DRONE)</text><polygon fill="#A80036" points="958.75,291.5625,963.75,293.5625,958.75,295.5625,960.75,293.5625" style="stroke:#A80036;stroke-width:0.5;"/><line style="stroke:#A80036;stroke-width:0.5;stroke-dasharray:2.0,2.0;" x1="361" x2="961.75" y1="293.5625" y2="293.5625"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="364.5" y="291.1343">10</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="380.5" x="373.5" y="291.1343">create(completeRemainingPath, gastoEnergeticoRestante, tempoRestante, distanciaRestante, droneID, pharmacyID, deliveryID, db)</text><rect fill="#FEFECE" filter="url(#f124eobtegh7f1)" height="15.8047" style="stroke:#A80036;stroke-width:0.75;" width="77" x="964.75" y="282.3867"/><text fill="#000000" font-family="sans-serif" font-size="7" lengthAdjust="spacing" textLength="70" x="968.25" y="293.1533">stop:StopForCharging</text><polygon fill="#A80036" points="995.75,314.8672,1000.75,316.8672,995.75,318.8672,997.75,316.8672" style="stroke:#A80036;stroke-width:0.5;"/><line style="stroke:#A80036;stroke-width:0.5;" x1="361" x2="998.75" y1="316.8672" y2="316.8672"/><text fill="#000000" font-family="sans-serif" font-size="6.5" font-weight="bold" lengthAdjust="spacing" textLength="7" x="364.5" y="314.439">11</text><text fill="#000000" font-family="sans-serif" font-size="6.5" lengthAdjust="spacing" textLength="13" x="373.5" y="314.439">run()</text><!--MD5=[a0e0aec1cb039129027fc08891ac78d6]
@startuml
autonumber


participant ":DroneDeliveryPlanningTask" as TASK
participant ":remaining:List<String>" as RE
participant "plan:DeliveryPlanning" as PLAN
participant "pesosPorEcomenda:Map<String, Float>" as PESOS
participant ":Print" as P
participant "stop:StopForCharging" as STOP





activate TASK

-> TASK: tratarRemainingPath(remainingPath, droneID, pharmacyID, plan, pesosPorEncomenda, idDelivey, db, outputFileName)

TASK -> RE: actualFarmacia = removeFirst()
activate RE
deactivate RE

TASK -> RE: startingFarmacia = removeLast()
activate RE
deactivate RE

TASK -> PLAN: completeRemainingPath = ShortestPathDrone(remaining, actualFarmacia, startingFarmacia)
activate PLAN
deactivate PLAN

TASK -> PLAN : payload = getActualPayload()
activate PLAN
deactivate PLAN

TASK -> PLAN: gastoEnergeticoRestante = calculateEnergyCost(completeRemainingPath, payload, VehicleType.DRONE, pesosPorEncomenda)
activate PLAN
deactivate PLAN

TASK -> PLAN:  distanciaRestante = pathWeight(completeRemainingPath)
activate PLAN
deactivate PLAN

TASK -> PLAN: tempoRestante = getSpentTimeLastDronePath()
activate PLAN
deactivate PLAN


TASK -> P: printRemainingDeliveryPath(outputFileName, actualFarmacia, completeRemainingPath, gastoEnergeticoRestante, distanciaRestante, tempoRestante, VehicleType.DRONE)
activate P
deactivate P

TASK - -> STOP**: create(completeRemainingPath, gastoEnergeticoRestante, tempoRestante, distanciaRestante, droneID, pharmacyID, deliveryID, db)

TASK -> STOP: run()
activate STOP
deactivate STOP

deactivate TASK

@enduml

PlantUML version 1.2021.00(Sun Jan 10 10:25:05 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>