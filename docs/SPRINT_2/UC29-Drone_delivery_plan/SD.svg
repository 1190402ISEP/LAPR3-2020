<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="848.8px" preserveAspectRatio="none" style="width:1701px;height:848px;" version="1.1" viewBox="0 0 1701 848" width="1701.6px" zoomAndPan="magnify"><defs><filter height="300%" id="f1308xn5p29y18" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.6"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.2" dy="3.2" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="17.8813" style="stroke:#A80036;stroke-width:0.8;" width="8" x="83.2" y="41.2875"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="739.6688" style="stroke:#A80036;stroke-width:0.8;" width="8" x="476" y="59.1688"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="22.4" style="stroke:#A80036;stroke-width:0.8;" width="8" x="480" y="465.1063"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="22.4" style="stroke:#A80036;stroke-width:0.8;" width="8" x="480" y="630.5125"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1305.6" y="83.45"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1305.6" y="131.7313"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1305.6" y="180.0125"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1305.6" y="774.8375"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1578.8" y="265.5813"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1578.8" y="313.8625"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1578.8" y="362.1438"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1578.8" y="410.425"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1669.2" y="555.55"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1669.2" y="726.5563"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="111.525" style="stroke:#000000;stroke-width:1.6;" width="670.4" x="392.8" y="591.55"/><line style="stroke:#A80036;stroke-width:0.8;stroke-dasharray:5.0,5.0;" x1="87.2" x2="87.2" y1="33.2875" y2="813.2375"/><line style="stroke:#A80036;stroke-width:0.8;stroke-dasharray:5.0,5.0;" x1="480" x2="480" y1="33.2875" y2="813.2375"/><line style="stroke:#A80036;stroke-width:0.8;stroke-dasharray:5.0,5.0;" x1="1059.2" x2="1059.2" y1="33.2875" y2="813.2375"/><line style="stroke:#A80036;stroke-width:0.8;stroke-dasharray:5.0,5.0;" x1="1204" x2="1204" y1="33.2875" y2="813.2375"/><line style="stroke:#A80036;stroke-width:0.8;stroke-dasharray:5.0,5.0;" x1="1309.6" x2="1309.6" y1="33.2875" y2="813.2375"/><line style="stroke:#A80036;stroke-width:0.8;stroke-dasharray:5.0,5.0;" x1="1437.6" x2="1437.6" y1="237.0563" y2="813.2375"/><line style="stroke:#A80036;stroke-width:0.8;stroke-dasharray:5.0,5.0;" x1="1582.4" x2="1582.4" y1="33.2875" y2="813.2375"/><line style="stroke:#A80036;stroke-width:0.8;stroke-dasharray:5.0,5.0;" x1="1672.8" x2="1672.8" y1="33.2875" y2="813.2375"/><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="163.2" x="4" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="152" x="9.6" y="21.2266">:ScooterDeliveryPlanningTask</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="163.2" x="4" y="812.4375"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="152" x="9.6" y="829.6641">:ScooterDeliveryPlanningTask</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="155.2" x="400.8" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="144" x="406.4" y="21.2266">:DroneDeliveryPlanningTask</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="155.2" x="400.8" y="812.4375"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="144" x="406.4" y="829.6641">:DroneDeliveryPlanningTask</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="164.8" x="975.2" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="153.6" x="980.8" y="21.2266">pharmacyOrders:List&lt;Integer&gt;</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="164.8" x="975.2" y="812.4375"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="153.6" x="980.8" y="829.6641">pharmacyOrders:List&lt;Integer&gt;</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="102.4" x="1151.2" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="91.2" x="1156.8" y="21.2266">cords:List&lt;String&gt;</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="102.4" x="1151.2" y="812.4375"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="91.2" x="1156.8" y="829.6641">cords:List&lt;String&gt;</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="86.4" x="1264.8" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="75.2" x="1270.4" y="21.2266">db:PlanningDB</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="86.4" x="1264.8" y="812.4375"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="75.2" x="1270.4" y="829.6641">db:PlanningDB</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="147.2" x="1362.4" y="812.4375"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="136" x="1368" y="829.6641">remainingPath:List&lt;String&gt;</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="120.8" x="1520.8" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="109.6" x="1526.4" y="21.2266">plan:DeliveryPlanning</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="120.8" x="1520.8" y="812.4375"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="109.6" x="1526.4" y="829.6641">plan:DeliveryPlanning</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="37.6" x="1652.8" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="26.4" x="1658.4" y="21.2266">:Print</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="37.6" x="1652.8" y="812.4375"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="26.4" x="1658.4" y="829.6641">:Print</text><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="17.8813" style="stroke:#A80036;stroke-width:0.8;" width="8" x="83.2" y="41.2875"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="739.6688" style="stroke:#A80036;stroke-width:0.8;" width="8" x="476" y="59.1688"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="22.4" style="stroke:#A80036;stroke-width:0.8;" width="8" x="480" y="465.1063"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="22.4" style="stroke:#A80036;stroke-width:0.8;" width="8" x="480" y="630.5125"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1305.6" y="83.45"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1305.6" y="131.7313"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1305.6" y="180.0125"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1305.6" y="774.8375"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1578.8" y="265.5813"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1578.8" y="313.8625"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1578.8" y="362.1438"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1578.8" y="410.425"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1669.2" y="555.55"/><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="24" style="stroke:#A80036;stroke-width:0.8;" width="8" x="1669.2" y="726.5563"/><polygon fill="#A80036" points="466.4,55.9688,474.4,59.1688,466.4,62.3688,469.6,59.1688" style="stroke:#A80036;stroke-width:0.8;"/><line style="stroke:#A80036;stroke-width:0.8;" x1="87.2" x2="471.2" y1="59.1688" y2="59.1688"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="92.8" y="55.2836">1</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="360.8" x="101.6" y="55.2836">plan(pharmacyOrders, pharmacyID, cords, pharmacyCords, payload, db, plan)</text><polygon fill="#A80036" points="1296,80.25,1304,83.45,1296,86.65,1299.2,83.45" style="stroke:#A80036;stroke-width:0.8;"/><line style="stroke:#A80036;stroke-width:0.8;" x1="484" x2="1300.8" y1="83.45" y2="83.45"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="489.6" y="79.5648">2</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="234.4" x="498.4" y="79.5648">droneID = getAvailableDrone(pharmacyID, payload)</text><polygon fill="#A80036" points="1296,128.5313,1304,131.7313,1296,134.9313,1299.2,131.7313" style="stroke:#A80036;stroke-width:0.8;"/><line style="stroke:#A80036;stroke-width:0.8;" x1="484" x2="1300.8" y1="131.7313" y2="131.7313"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="489.6" y="127.8461">3</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="307.2" x="498.4" y="127.8461">actualBatteryWH = getActualBatteryVehicle(droneID, pharmacyID)</text><polygon fill="#A80036" points="1296,176.8125,1304,180.0125,1296,183.2125,1299.2,180.0125" style="stroke:#A80036;stroke-width:0.8;"/><line style="stroke:#A80036;stroke-width:0.8;" x1="484" x2="1300.8" y1="180.0125" y2="180.0125"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="489.6" y="176.1273">4</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="416" x="498.4" y="176.1273">allFarmacias = getCordsOfPharmacysWithAvailableChargingStation(VehicleType.DRONE)</text><polygon fill="#A80036" points="1352.8,225.0938,1360.8,228.2938,1352.8,231.4938,1356,228.2938" style="stroke:#A80036;stroke-width:0.8;"/><line style="stroke:#A80036;stroke-width:0.8;stroke-dasharray:2.0,2.0;" x1="484" x2="1357.6" y1="228.2938" y2="228.2938"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="489.6" y="224.4086">5</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="35.2" x="498.4" y="224.4086">create()</text><rect fill="#FEFECE" filter="url(#f1308xn5p29y18)" height="25.2875" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="147.2" x="1362.4" y="210.4125"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="136" x="1368" y="227.6391">remainingPath:List&lt;String&gt;</text><polygon fill="#A80036" points="1569.2,262.3813,1577.2,265.5813,1569.2,268.7813,1572.4,265.5813" style="stroke:#A80036;stroke-width:0.8;"/><line style="stroke:#A80036;stroke-width:0.8;" x1="484" x2="1574" y1="265.5813" y2="265.5813"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="489.6" y="261.6961">6</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="725.6" x="498.4" y="261.6961">pathDrone = mostEficientPath(cords, pharmacyCords, VehicleType.DRONE, actualBatteryWH, payload, pesosPorEncomenda, allFarmacias, remainingPath)</text><polygon fill="#A80036" points="1569.2,310.6625,1577.2,313.8625,1569.2,317.0625,1572.4,313.8625" style="stroke:#A80036;stroke-width:0.8;"/><line style="stroke:#A80036;stroke-width:0.8;" x1="484" x2="1574" y1="313.8625" y2="313.8625"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="489.6" y="309.9773">7</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="188.8" x="498.4" y="309.9773">distanceDrone = pathWeight(pathDrone);</text><polygon fill="#A80036" points="1569.2,358.9438,1577.2,362.1438,1569.2,365.3438,1572.4,362.1438" style="stroke:#A80036;stroke-width:0.8;"/><line style="stroke:#A80036;stroke-width:0.8;" x1="484" x2="1574" y1="362.1438" y2="362.1438"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="489.6" y="358.2586">8</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="466.4" x="498.4" y="358.2586">energyCost = calculateEnergyCost(pathDrone, payload, VehicleType.DRONE, pesosPorEncomenda)</text><polygon fill="#A80036" points="1569.2,407.225,1577.2,410.425,1569.2,413.625,1572.4,410.425" style="stroke:#A80036;stroke-width:0.8;"/><line style="stroke:#A80036;stroke-width:0.8;" x1="484" x2="1574" y1="410.425" y2="410.425"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="489.6" y="406.5398">9</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="172" x="498.4" y="406.5398">time = getSpentTimeLastDronePath()</text><line style="stroke:#A80036;stroke-width:0.8;" x1="488" x2="521.6" y1="458.7063" y2="458.7063"/><line style="stroke:#A80036;stroke-width:0.8;" x1="521.6" x2="521.6" y1="458.7063" y2="469.1063"/><line style="stroke:#A80036;stroke-width:0.8;" x1="488.8" x2="521.6" y1="469.1063" y2="469.1063"/><polygon fill="#A80036" points="496.8,465.9063,488.8,469.1063,496.8,472.3063,493.6,469.1063" style="stroke:#A80036;stroke-width:0.8;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="11.2" x="493.6" y="454.8211">10</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="490.4" x="508" y="454.8211">idDelivey = finalSteps(db, droneID, pharmacyID, pharmacyOrders, distanceDrone, time, energyCost, pass)</text><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="34.1625" style="stroke:#000000;stroke-width:1.6;" width="160" x="398.4" y="499.5063"/><polygon fill="#EEEEEE" points="398.4,499.5063,448,499.5063,448,505.9063,440,513.9063,398.4,513.9063,398.4,499.5063" style="stroke:#000000;stroke-width:1.6;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="13.6" x="408.8" y="511.9023">ref</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="69.6" x="445.2" y="527.9023">SD_FinalSteps</text><polygon fill="#A80036" points="1659.6,552.35,1667.6,555.55,1659.6,558.75,1662.8,555.55" style="stroke:#A80036;stroke-width:0.8;"/><line style="stroke:#A80036;stroke-width:0.8;" x1="484" x2="1664.4" y1="555.55" y2="555.55"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="11.2" x="489.6" y="551.6648">11</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="694.4" x="504" y="551.6648">printFileDelivery(null, pathDrone, distanceDrone, time, energyCost, idDelivey, outputFileName, actualBatteryWH, payload, droneID, 0, pharmacyCords)</text><path d="M392.8,591.55 L441.6,591.55 L441.6,597.95 L433.6,605.95 L392.8,605.95 L392.8,591.55 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.8;"/><rect fill="none" height="111.525" style="stroke:#000000;stroke-width:1.6;" width="670.4" x="392.8" y="591.55"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="12.8" x="404.8" y="603.1461">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacing" textLength="139.2" x="453.6" y="602.2852">[if if (!remainingPath.isEmpty())]</text><line style="stroke:#A80036;stroke-width:0.8;" x1="488" x2="521.6" y1="624.1125" y2="624.1125"/><line style="stroke:#A80036;stroke-width:0.8;" x1="521.6" x2="521.6" y1="624.1125" y2="634.5125"/><line style="stroke:#A80036;stroke-width:0.8;" x1="488.8" x2="521.6" y1="634.5125" y2="634.5125"/><polygon fill="#A80036" points="496.8,631.3125,488.8,634.5125,496.8,637.7125,493.6,634.5125" style="stroke:#A80036;stroke-width:0.8;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="11.2" x="493.6" y="620.2273">12</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="545.6" x="508" y="620.2273">tratarRemainingPath(remainingPath, droneID, pharmacyID, plan, pesosPorEncomenda, idDelivey, db, outputFileName)</text><rect fill="#FFFFFF" filter="url(#f1308xn5p29y18)" height="34.1625" style="stroke:#000000;stroke-width:1.6;" width="160" x="398.4" y="664.9125"/><polygon fill="#EEEEEE" points="398.4,664.9125,448,664.9125,448,671.3125,440,679.3125,398.4,679.3125,398.4,664.9125" style="stroke:#000000;stroke-width:1.6;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="13.6" x="408.8" y="677.3086">ref</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="142.4" x="408.8" y="693.3086">SD_TratarRemainingPath_UC5</text><polygon fill="#A80036" points="1659.6,723.3563,1667.6,726.5563,1659.6,729.7563,1662.8,726.5563" style="stroke:#A80036;stroke-width:0.8;"/><line style="stroke:#A80036;stroke-width:0.8;" x1="484" x2="1664.4" y1="726.5563" y2="726.5563"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="11.2" x="489.6" y="722.6711">13</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="236.8" x="504" y="722.6711">printPhisics(outputFileName, VehicleType.DRONE)</text><polygon fill="#A80036" points="1296,771.6375,1304,774.8375,1296,778.0375,1299.2,774.8375" style="stroke:#A80036;stroke-width:0.8;"/><line style="stroke:#A80036;stroke-width:0.8;" x1="484" x2="1300.8" y1="774.8375" y2="774.8375"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="11.2" x="489.6" y="770.9523">14</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="181.6" x="504" y="770.9523">updateOrderStateToDelivered(idDelivey)</text><!--MD5=[1de92045210e9c141b16bbab58cc9054]
@startuml
autonumber


participant ":ScooterDeliveryPlanningTask" as STASK
participant ":DroneDeliveryPlanningTask" as TASK
participant "pharmacyOrders:List<Integer>" as ORDERSIDS
participant "cords:List<String>" as CORDS
participant "db:PlanningDB" as DB
participant "remainingPath:List<String>" as REMAINING
participant "plan:DeliveryPlanning" as SPLAN
participant ":Print" as PRINT



activate STASK
STASK -> TASK :plan(pharmacyOrders, pharmacyID, cords, pharmacyCords, payload, db, plan)
deactivate STASK
activate TASK

TASK -> DB: droneID = getAvailableDrone(pharmacyID, payload)
activate DB
deactivate DB

TASK -> DB: actualBatteryWH = getActualBatteryVehicle(droneID, pharmacyID)

activate DB
deactivate DB


TASK -> DB: allFarmacias = getCordsOfPharmacysWithAvailableChargingStation(VehicleType.DRONE)
activate DB
deactivate DB

TASK - -> REMAINING**: create()

TASK -> SPLAN: pathDrone = mostEficientPath(cords, pharmacyCords, VehicleType.DRONE, actualBatteryWH, payload, pesosPorEncomenda, allFarmacias, remainingPath)
activate SPLAN
deactivate SPLAN


TASK -> SPLAN: distanceDrone = pathWeight(pathDrone);
activate SPLAN
deactivate SPLAN


TASK -> SPLAN: energyCost = calculateEnergyCost(pathDrone, payload, VehicleType.DRONE, pesosPorEncomenda)
activate SPLAN
deactivate SPLAN


TASK -> SPLAN: time = getSpentTimeLastDronePath()
activate SPLAN
deactivate SPLAN

TASK -> TASK: idDelivey = finalSteps(db, droneID, pharmacyID, pharmacyOrders, distanceDrone, time, energyCost, pass)
activate TASK
ref over TASK : SD_FinalSteps
deactivate TASK


TASK -> PRINT: printFileDelivery(null, pathDrone, distanceDrone, time, energyCost, idDelivey, outputFileName, actualBatteryWH, payload, droneID, 0, pharmacyCords)
activate PRINT
deactivate PRINT



alt if if (!remainingPath.isEmpty())

TASK -> TASK: tratarRemainingPath(remainingPath, droneID, pharmacyID, plan, pesosPorEncomenda, idDelivey, db, outputFileName)

activate TASK
deactivate TASK
ref over TASK: SD_TratarRemainingPath_UC5
end

TASK -> PRINT: printPhisics(outputFileName, VehicleType.DRONE)
activate PRINT
deactivate PRINT

TASK -> DB: updateOrderStateToDelivered(idDelivey)
activate DB
deactivate DB



deactivate TASK



@enduml

PlantUML version 1.2021.00(Sun Jan 10 10:25:05 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>