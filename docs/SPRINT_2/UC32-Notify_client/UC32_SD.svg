<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="479px" preserveAspectRatio="none" style="width:988px;height:479px;" version="1.1" viewBox="0 0 988 479" width="988px" zoomAndPan="magnify"><defs><filter height="300%" id="f16jr0s61qawsp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f16jr0s61qawsp)" height="221.4063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="197" y="162.3125"/><rect fill="#FFFFFF" filter="url(#f16jr0s61qawsp)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="365.5" y="192.6641"/><rect fill="#FFFFFF" filter="url(#f16jr0s61qawsp)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="724" y="278.3672"/><rect fill="#FFFFFF" filter="url(#f16jr0s61qawsp)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="906.5" y="338.7188"/><rect fill="#FFFFFF" filter="url(#f16jr0s61qawsp)" height="139.0547" style="stroke: #000000; stroke-width: 2.0;" width="886" x="88" y="237.6641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="67" x2="67" y1="89.6094" y2="393.7188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="202" x2="202" y1="89.6094" y2="393.7188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="370" x2="370" y1="89.6094" y2="393.7188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="553" x2="553" y1="89.6094" y2="393.7188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="729" x2="729" y1="89.6094" y2="393.7188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="818" x2="818" y1="89.6094" y2="393.7188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="911" x2="911" y1="89.6094" y2="393.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="46" y="86.5332">Timer</text><ellipse cx="67" cy="15" fill="#FEFECE" filter="url(#f16jr0s61qawsp)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67,23 L67,50 M54,31 L80,31 M67,50 L54,65 M67,50 L80,65 " fill="none" filter="url(#f16jr0s61qawsp)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="46" y="407.252">Timer</text><ellipse cx="67" cy="420.3281" fill="#FEFECE" filter="url(#f16jr0s61qawsp)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67,428.3281 L67,455.3281 M54,436.3281 L80,436.3281 M67,455.3281 L54,470.3281 M67,455.3281 L80,470.3281 " fill="none" filter="url(#f16jr0s61qawsp)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f16jr0s61qawsp)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="204" x="98" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="190" x="105" y="74.5332">:ScooterDeliveryPlanningTask</text><rect fill="#FEFECE" filter="url(#f16jr0s61qawsp)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="204" x="98" y="392.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="190" x="105" y="414.252">:ScooterDeliveryPlanningTask</text><rect fill="#FEFECE" filter="url(#f16jr0s61qawsp)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="316" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="323" y="74.5332">:OrdersQueue</text><rect fill="#FEFECE" filter="url(#f16jr0s61qawsp)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="316" y="392.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="323" y="414.252">:OrdersQueue</text><rect fill="#FEFECE" filter="url(#f16jr0s61qawsp)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="232" x="435" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="218" x="442" y="74.5332">orders:Map&lt;Integer,List&lt;Integer&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f16jr0s61qawsp)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="232" x="435" y="392.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="218" x="442" y="414.252">orders:Map&lt;Integer,List&lt;Integer&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f16jr0s61qawsp)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="681" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="688" y="74.5332">:PlanningDB</text><rect fill="#FEFECE" filter="url(#f16jr0s61qawsp)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="681" y="392.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="688" y="414.252">:PlanningDB</text><rect fill="#FEFECE" filter="url(#f16jr0s61qawsp)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="787" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="794" y="74.5332">t:Timer</text><rect fill="#FEFECE" filter="url(#f16jr0s61qawsp)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="787" y="392.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="794" y="414.252">t:Timer</text><rect fill="#FEFECE" filter="url(#f16jr0s61qawsp)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="859" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="866" y="74.5332">:EmailHandler</text><rect fill="#FEFECE" filter="url(#f16jr0s61qawsp)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="859" y="392.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="866" y="414.252">:EmailHandler</text><rect fill="#FFFFFF" filter="url(#f16jr0s61qawsp)" height="221.4063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="197" y="162.3125"/><rect fill="#FFFFFF" filter="url(#f16jr0s61qawsp)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="365.5" y="192.6641"/><rect fill="#FFFFFF" filter="url(#f16jr0s61qawsp)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="724" y="278.3672"/><rect fill="#FFFFFF" filter="url(#f16jr0s61qawsp)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="906.5" y="338.7188"/><path d="M5,104.6094 L5,130.6094 L126,130.6094 L126,114.6094 L116,104.6094 L5,104.6094 " fill="#FBFB77" filter="url(#f16jr0s61qawsp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M116,104.6094 L116,114.6094 L126,114.6094 L116,104.6094 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="11" y="123.1045">when time arrives</text><polygon fill="#A80036" points="185,158.3125,195,162.3125,185,166.3125,189,162.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="191" y1="162.3125" y2="162.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="74" y="157.4561">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="85" y="157.4561">run()</text><polygon fill="#A80036" points="353.5,188.6641,363.5,192.6641,353.5,196.6641,357.5,192.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="207" x2="359.5" y1="192.6641" y2="192.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="214" y="187.8076">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="225" y="187.8076">orders = getOrders()</text><path d="M88,237.6641 L161,237.6641 L161,245.6641 L151,255.6641 L88,255.6641 L88,237.6641 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="139.0547" style="stroke: #000000; stroke-width: 2.0;" width="886" x="88" y="237.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="103" y="252.1592">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="261" x="176" y="251.083">[until there are no orders in each list of orders]</text><polygon fill="#A80036" points="712,274.3672,722,278.3672,712,282.3672,716,278.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="207" x2="718" y1="278.3672" y2="278.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="214" y="273.5107">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="225" y="273.5107">destinatario = getClientEmailByOrder(orderID)</text><polygon fill="#A80036" points="894.5,334.7188,904.5,338.7188,894.5,342.7188,898.5,338.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="207" x2="900.5" y1="338.7188" y2="338.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="214" y="333.8623">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="225" y="333.8623">sendEmail(destinatario)</text><!--MD5=[180bb0ec4d68e34627cf83ebe4a8fd5f]
@startuml
autonumber

actor "Timer" as TIME


participant ":ScooterDeliveryPlanningTask" as TASK
participant ":OrdersQueue" as QU
participant "orders:Map<Integer,List<Integer>>" as MAP
participant ":PlanningDB" as DB
participant "t:Timer" as TIMER
participant ":EmailHandler" as eh


note over TIME: when time arrives
TIME -> TASK: run()
activate TASK

TASK -> QU: orders = getOrders()

activate  QU
deactivate  QU


loop until there are no orders in each list of orders

TASK -> DB: destinatario = getClientEmailByOrder(orderID)
activate DB
deactivate DB


TASK -> eh: sendEmail(destinatario)
activate eh
deactivate eh

end loop


deactivate TASK






@enduml

PlantUML version 1.2020.20(Sat Nov 21 10:02:45 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>