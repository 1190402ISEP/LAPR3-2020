<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2066px" preserveAspectRatio="none" style="width:2327px;height:2066px;" version="1.1" viewBox="0 0 2327 2066" width="2327px" zoomAndPan="magnify"><defs><filter height="300%" id="fhfq7ymvzh6rt" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="1800.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="197" y="162.3125"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="202" y="1739.5234"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="526" y="192.6641"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="526" y="1932.5781"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="278.3672"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="338.7188"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="459.4219"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="519.7734"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="660.1797"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="800.5859"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="860.9375"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="1349.7109"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="1410.0625"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="1530.7656"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="1591.1172"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="1865.2266"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1689.5" y="399.0703"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1689.5" y="967.8984"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1689.5" y="1108.3047"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1689.5" y="1168.6563"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1689.5" y="1229.0078"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1689.5" y="1289.3594"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2273" y="1470.4141"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2273" y="1804.875"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="1665.5625" style="stroke:#000000;stroke-width:2.0;" width="2235.5" x="78" y="237.6641"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="66.0547" style="stroke:#000000;stroke-width:2.0;" width="228" x="88" y="564.7734"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="66.0547" style="stroke:#000000;stroke-width:2.0;" width="228" x="88" y="705.1797"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="66.0547" style="stroke:#000000;stroke-width:2.0;" width="228" x="88" y="1012.8984"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="66.0547" style="stroke:#000000;stroke-width:2.0;" width="237" x="88" y="1636.1172"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="67" x2="67" y1="89.6094" y2="1980.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="202" x2="202" y1="89.6094" y2="1980.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="530.5" x2="530.5" y1="89.6094" y2="1980.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="713.5" x2="713.5" y1="89.6094" y2="1980.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="889.5" x2="889.5" y1="89.6094" y2="1980.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1052.5" x2="1052.5" y1="89.6094" y2="1980.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1254.5" x2="1254.5" y1="89.6094" y2="1980.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1485.5" x2="1485.5" y1="89.6094" y2="1980.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1694.5" x2="1694.5" y1="89.6094" y2="1980.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1885.5" x2="1885.5" y1="89.6094" y2="1980.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2127.5" x2="2127.5" y1="932.2422" y2="1980.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2277.5" x2="2277.5" y1="89.6094" y2="1980.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="46" y="86.5332">Timer</text><ellipse cx="67" cy="15" fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M67,23 L67,50 M54,31 L80,31 M67,50 L54,65 M67,50 L80,65 " fill="none" filter="url(#fhfq7ymvzh6rt)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="46" y="1994.1113">Timer</text><ellipse cx="67" cy="2007.1875" fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M67,2015.1875 L67,2042.1875 M54,2023.1875 L80,2023.1875 M67,2042.1875 L54,2057.1875 M67,2042.1875 L80,2057.1875 " fill="none" filter="url(#fhfq7ymvzh6rt)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="204" x="98" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="105" y="74.5332">:ScooterDeliveryPlanningTask</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="204" x="98" y="1979.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="105" y="2001.1113">:ScooterDeliveryPlanningTask</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="105" x="476.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="483.5" y="74.5332">:OrdersQueue</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="105" x="476.5" y="1979.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="483.5" y="2001.1113">:OrdersQueue</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="232" x="595.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="218" x="602.5" y="74.5332">orders:Map&lt;Integer,List&lt;Integer&gt;&gt;</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="232" x="595.5" y="1979.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="218" x="602.5" y="2001.1113">orders:Map&lt;Integer,List&lt;Integer&gt;&gt;</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="92" x="841.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="848.5" y="74.5332">:PlanningDB</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="92" x="841.5" y="1979.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="848.5" y="2001.1113">:PlanningDB</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="206" x="947.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="954.5" y="74.5332">pharmacyOrders:List&lt;Integer&gt;</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="206" x="947.5" y="1979.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="954.5" y="2001.1113">pharmacyOrders:List&lt;Integer&gt;</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="170" x="1167.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="1174.5" y="74.5332">cords:LinkedList&lt;String&gt;</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="170" x="1167.5" y="1979.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="1174.5" y="2001.1113">cords:LinkedList&lt;String&gt;</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="265" x="1351.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="251" x="1358.5" y="74.5332">pesosPorEcomenda:Map&lt;String, Float&gt;</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="265" x="1351.5" y="1979.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="251" x="1358.5" y="2001.1113">pesosPorEcomenda:Map&lt;String, Float&gt;</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="124" x="1630.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="1637.5" y="74.5332">:DeliveryPlanning</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="124" x="1630.5" y="1979.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="1637.5" y="2001.1113">:DeliveryPlanning</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="230" x="1768.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216" x="1775.5" y="74.5332">allFarmacias:Map&lt;Integer, String&gt;</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="230" x="1768.5" y="1979.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216" x="1775.5" y="2001.1113">allFarmacias:Map&lt;Integer, String&gt;</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="226" x="2012.5" y="1979.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212" x="2019.5" y="2001.1113">remainingPath:LinkedList&lt;String&gt;</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="47" x="2252.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="2259.5" y="74.5332">:Print</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="47" x="2252.5" y="1979.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="2259.5" y="2001.1113">:Print</text><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="1800.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="197" y="162.3125"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="202" y="1739.5234"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="526" y="192.6641"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="526" y="1932.5781"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="278.3672"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="338.7188"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="459.4219"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="519.7734"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="660.1797"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="800.5859"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="860.9375"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="1349.7109"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="1410.0625"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="1530.7656"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="1591.1172"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="884.5" y="1865.2266"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1689.5" y="399.0703"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1689.5" y="967.8984"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1689.5" y="1108.3047"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1689.5" y="1168.6563"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1689.5" y="1229.0078"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1689.5" y="1289.3594"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2273" y="1470.4141"/><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2273" y="1804.875"/><path d="M5,104.6094 L5,130.6094 L126,130.6094 L126,114.6094 L116,104.6094 L5,104.6094 " fill="#FBFB77" filter="url(#fhfq7ymvzh6rt)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M116,104.6094 L116,114.6094 L126,114.6094 L116,104.6094 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="11" y="123.1045">when time arrives</text><polygon fill="#A80036" points="185,158.3125,195,162.3125,185,166.3125,189,162.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="67" x2="191" y1="162.3125" y2="162.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="74" y="157.4561">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="85" y="157.4561">run()</text><polygon fill="#A80036" points="514,188.6641,524,192.6641,514,196.6641,518,192.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="520" y1="192.6641" y2="192.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="214" y="187.8076">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="225" y="187.8076">orders = getOrders()</text><path d="M78,237.6641 L151,237.6641 L151,245.6641 L141,255.6641 L78,255.6641 L78,237.6641 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="1665.5625" style="stroke:#000000;stroke-width:2.0;" width="2235.5" x="78" y="237.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="93" y="252.1592">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="271" x="166" y="251.083">[pharmacyOrders = orders.get(i) | i = pharmacyID]</text><polygon fill="#A80036" points="872.5,274.3672,882.5,278.3672,872.5,282.3672,876.5,278.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="878.5" y1="278.3672" y2="278.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="214" y="273.5107">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="225" y="273.5107">cords = getCordsByOrders(pharmacyOrders)</text><polygon fill="#A80036" points="872.5,334.7188,882.5,338.7188,872.5,342.7188,876.5,338.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="878.5" y1="338.7188" y2="338.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="214" y="333.8623">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="225" y="333.8623">pesosPorEcomenda = getPesosPorEncomenda(pharmacyOrders)</text><polygon fill="#A80036" points="1677.5,395.0703,1687.5,399.0703,1677.5,403.0703,1681.5,399.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="1683.5" y1="399.0703" y2="399.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="214" y="394.2139">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="225" y="394.2139">payload = getTotalPayload(pesosPorEcomenda)</text><polygon fill="#A80036" points="872.5,455.4219,882.5,459.4219,872.5,463.4219,876.5,459.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="878.5" y1="459.4219" y2="459.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="214" y="454.5654">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="358" x="225" y="454.5654">pharmacyCords = getCoordinatesByPharmacyID(pharmacyID)</text><polygon fill="#A80036" points="872.5,515.7734,882.5,519.7734,872.5,523.7734,876.5,519.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="878.5" y1="519.7734" y2="519.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="214" y="514.917">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262" x="225" y="514.917">courierNIF = getAvailableCourier(pharmacyID)</text><path d="M88,564.7734 L149,564.7734 L149,572.7734 L139,582.7734 L88,582.7734 L88,564.7734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="66.0547" style="stroke:#000000;stroke-width:2.0;" width="228" x="88" y="564.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="103" y="579.2686">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98" x="164" y="578.1924">[if courierNIF == 0]</text><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="42.7031" style="stroke:#000000;stroke-width:2.0;" width="210" x="95" y="583.125"/><polygon fill="#EEEEEE" points="95,583.125,157,583.125,157,591.125,147,601.125,95,601.125,95,583.125" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="108" y="598.6201">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="114.5" y="618.6201">UC_29_DroneDeliveryPlanning</text><polygon fill="#A80036" points="872.5,656.1797,882.5,660.1797,872.5,664.1797,876.5,660.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="878.5" y1="660.1797" y2="660.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="214" y="655.3232">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="382" x="225" y="655.3232">scooterID = getAvailableScooter(courierNIF, pharmacyID, payload)</text><path d="M88,705.1797 L149,705.1797 L149,713.1797 L139,723.1797 L88,723.1797 L88,705.1797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="66.0547" style="stroke:#000000;stroke-width:2.0;" width="228" x="88" y="705.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="103" y="719.6748">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="95" x="164" y="718.5986">[if scooterID == 0]</text><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="42.7031" style="stroke:#000000;stroke-width:2.0;" width="210" x="95" y="723.5313"/><polygon fill="#EEEEEE" points="95,723.5313,157,723.5313,157,731.5313,147,741.5313,95,741.5313,95,723.5313" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="108" y="739.0264">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="114.5" y="759.0264">UC_29_DroneDeliveryPlanning</text><polygon fill="#A80036" points="872.5,796.5859,882.5,800.5859,872.5,804.5859,876.5,800.5859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="878.5" y1="800.5859" y2="800.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="214" y="795.7295">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="395" x="225" y="795.7295">actualBatteryWH = getActualBatteryVehicle(scooterID, pharmacyID)</text><polygon fill="#A80036" points="872.5,856.9375,882.5,860.9375,872.5,864.9375,876.5,860.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="878.5" y1="860.9375" y2="860.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="856.0811">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="537" x="232" y="856.0811">allFarmacias = getCordsOfPharmacysWithAvailableChargingStation(VehicleType.SCOOTER)</text><polygon fill="#A80036" points="2000.5,917.2891,2010.5,921.2891,2000.5,925.2891,2004.5,921.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="207" x2="2006.5" y1="921.2891" y2="921.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="916.4326">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="232" y="916.4326">create()</text><rect fill="#FEFECE" filter="url(#fhfq7ymvzh6rt)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="226" x="2012.5" y="898.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212" x="2019.5" y="920.4707">remainingPath:LinkedList&lt;String&gt;</text><polygon fill="#A80036" points="1677.5,963.8984,1687.5,967.8984,1677.5,971.8984,1681.5,967.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="1683.5" y1="967.8984" y2="967.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="963.042">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="865" x="232" y="963.042">path = shortestPath(cords, pharmacyCords, VehicleType.SCOOTER, actualBatteryWH, allFarmacias, remainingPath, payload, pesosPorEncomenda)</text><path d="M88,1012.8984 L149,1012.8984 L149,1020.8984 L139,1030.8984 L88,1030.8984 L88,1012.8984 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="66.0547" style="stroke:#000000;stroke-width:2.0;" width="228" x="88" y="1012.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="103" y="1027.3936">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80" x="164" y="1026.3174">[if path == null]</text><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="42.7031" style="stroke:#000000;stroke-width:2.0;" width="210" x="95" y="1031.25"/><polygon fill="#EEEEEE" points="95,1031.25,157,1031.25,157,1039.25,147,1049.25,95,1049.25,95,1031.25" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="108" y="1046.7451">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="114.5" y="1066.7451">UC_29_DroneDeliveryPlanning</text><polygon fill="#A80036" points="1677.5,1104.3047,1687.5,1108.3047,1677.5,1112.3047,1681.5,1108.3047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="1683.5" y1="1108.3047" y2="1108.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="1103.4482">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="232" y="1103.4482">distance = pathWeight(path)</text><polygon fill="#A80036" points="1677.5,1164.6563,1687.5,1168.6563,1677.5,1172.6563,1681.5,1168.6563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="1683.5" y1="1168.6563" y2="1168.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="1163.7998">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="232" y="1163.7998">velocidade = getVelocidadeScooter()</text><polygon fill="#A80036" points="1677.5,1225.0078,1687.5,1229.0078,1677.5,1233.0078,1681.5,1229.0078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="1683.5" y1="1229.0078" y2="1229.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="1224.1514">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280" x="232" y="1224.1514">time = calculateSpentTime(distance, velocidade)</text><polygon fill="#A80036" points="1677.5,1285.3594,1687.5,1289.3594,1677.5,1293.3594,1681.5,1289.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="1683.5" y1="1289.3594" y2="1289.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="1284.5029">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="566" x="232" y="1284.5029">energyCost = calculateEnergyCost(path, payload, VehicleType.SCOOTER, pesosPorEncomenda)</text><polygon fill="#A80036" points="872.5,1345.7109,882.5,1349.7109,872.5,1353.7109,876.5,1349.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="878.5" y1="1349.7109" y2="1349.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="1344.8545">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="232" y="1344.8545">changestates = changeStates(scooterID, courierNIF, pharmacyID)</text><polygon fill="#A80036" points="872.5,1406.0625,882.5,1410.0625,872.5,1414.0625,876.5,1410.0625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="878.5" y1="1410.0625" y2="1410.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="1405.2061">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="519" x="232" y="1405.2061">deliveryID = insertDelivery(courierNIF, scooterID, pharmacyID, distance, time, energyCost)</text><polygon fill="#A80036" points="2261,1466.4141,2271,1470.4141,2261,1474.4141,2265,1470.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="2267" y1="1470.4141" y2="1470.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="1465.5576">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="839" x="232" y="1465.5576">printFileDelivery(path, distance, time, energyCost, deliveryID, outputFileName, actualBatteryWH, payload, scooterID, courierNIF, pharmacyCords)</text><polygon fill="#A80036" points="872.5,1526.7656,882.5,1530.7656,872.5,1534.7656,876.5,1530.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="878.5" y1="1530.7656" y2="1530.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="1525.9092">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="323" x="232" y="1525.9092">takeVehicleEnergy(scooterID, energyCost, pharmacyID)</text><polygon fill="#A80036" points="872.5,1587.1172,882.5,1591.1172,872.5,1595.1172,876.5,1591.1172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="878.5" y1="1591.1172" y2="1591.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="1586.2607">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="302" x="232" y="1586.2607">updateOrdersDeliveryID(pharmacyOrders, deliveryID)</text><path d="M88,1636.1172 L149,1636.1172 L149,1644.1172 L139,1654.1172 L88,1654.1172 L88,1636.1172 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="66.0547" style="stroke:#000000;stroke-width:2.0;" width="237" x="88" y="1636.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="103" y="1650.6123">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="156" x="164" y="1649.5361">[if !remainingPath.isEmpty()]</text><rect fill="#FFFFFF" filter="url(#fhfq7ymvzh6rt)" height="42.7031" style="stroke:#000000;stroke-width:2.0;" width="210" x="95" y="1654.4688"/><polygon fill="#EEEEEE" points="95,1654.4688,157,1654.4688,157,1662.4688,147,1672.4688,95,1672.4688,95,1654.4688" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="108" y="1669.9639">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="113" y="1689.9639">SD_TratarRemainingPath_UC5</text><line style="stroke:#A80036;stroke-width:1.0;" x1="212" x2="254" y1="1731.5234" y2="1731.5234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="254" x2="254" y1="1731.5234" y2="1744.5234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="213" x2="254" y1="1744.5234" y2="1744.5234"/><polygon fill="#A80036" points="223,1740.5234,213,1744.5234,223,1748.5234,219,1744.5234" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="219" y="1726.667">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287" x="237" y="1726.667">changeStates(courierNIF, scooterID, pharmacyID)</text><polygon fill="#A80036" points="2261,1800.875,2271,1804.875,2261,1808.875,2265,1804.875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="2267" y1="1804.875" y2="1804.875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="1800.0186">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313" x="232" y="1800.0186">printPhisics(outputFileName, VehicleType.SCOOTER)</text><polygon fill="#A80036" points="872.5,1861.2266,882.5,1865.2266,872.5,1869.2266,876.5,1865.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="878.5" y1="1865.2266" y2="1865.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="1860.3701">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="232" y="1860.3701">updateOrderStateToDelivered(deliveryID)</text><polygon fill="#A80036" points="514,1928.5781,524,1932.5781,514,1936.5781,518,1932.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207" x2="520" y1="1932.5781" y2="1932.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="214" y="1927.7217">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="232" y="1927.7217">clearQueue()</text><!--MD5=[6295aaf0272195d23c32ced2c9736bc4]
@startuml
autonumber

actor "Timer" as TIME


participant ":ScooterDeliveryPlanningTask" as TASK
participant ":OrdersQueue" as QU
participant "orders:Map<Integer,List<Integer>>" as MAP
participant ":PlanningDB" as DB
participant "pharmacyOrders:List<Integer>" as ORDERS
participant "cords:LinkedList<String>" AS CORDS
participant "pesosPorEcomenda:Map<String, Float>" as MAPPESOS
participant ":DeliveryPlanning" as PLAN
participant "allFarmacias:Map<Integer, String>" as ALLFARMACIAS
participant "remainingPath:LinkedList<String>" as REMAINING
participant ":Print" as PT



note over TIME: when time arrives
TIME -> TASK: run()
activate TASK

TASK -> QU: orders = getOrders()

activate  QU
deactivate  QU

loop pharmacyOrders = orders.get(i) | i = pharmacyID


TASK -> DB: cords = getCordsByOrders(pharmacyOrders)

activate DB
deactivate DB

TASK -> DB: pesosPorEcomenda = getPesosPorEncomenda(pharmacyOrders)

activate DB
deactivate DB

TASK -> PLAN: payload = getTotalPayload(pesosPorEcomenda)

activate PLAN
deactivate PLAN

TASK -> DB: pharmacyCords = getCoordinatesByPharmacyID(pharmacyID)

activate DB
deactivate DB

TASK -> DB: courierNIF = getAvailableCourier(pharmacyID)
activate DB
deactivate DB

alt if courierNIF == 0

ref over TASK: UC_29_DroneDeliveryPlanning
end

TASK -> DB: scooterID = getAvailableScooter(courierNIF, pharmacyID, payload)

activate DB
deactivate DB

alt if scooterID == 0

ref over TASK: UC_29_DroneDeliveryPlanning
end

TASK -> DB: actualBatteryWH = getActualBatteryVehicle(scooterID, pharmacyID)

activate DB
deactivate DB


TASK -> DB: allFarmacias = getCordsOfPharmacysWithAvailableChargingStation(VehicleType.SCOOTER)
activate DB
deactivate DB

TASK - -> REMAINING**: create()

TASK -> PLAN: path = shortestPath(cords, pharmacyCords, VehicleType.SCOOTER, actualBatteryWH, allFarmacias, remainingPath, payload, pesosPorEncomenda)

activate PLAN
deactivate PLAN

alt if path == null

ref over TASK: UC_29_DroneDeliveryPlanning
end

TASK -> PLAN: distance = pathWeight(path)

activate PLAN
deactivate PLAN

TASK -> PLAN: velocidade = getVelocidadeScooter()
activate PLAN
deactivate PLAN

TASK -> PLAN: time = calculateSpentTime(distance, velocidade)
activate PLAN
deactivate PLAN

TASK -> PLAN: energyCost = calculateEnergyCost(path, payload, VehicleType.SCOOTER, pesosPorEncomenda)
activate PLAN
deactivate PLAN

TASK -> DB: changestates = changeStates(scooterID, courierNIF, pharmacyID)
activate DB
deactivate DB

TASK -> DB: deliveryID = insertDelivery(courierNIF, scooterID, pharmacyID, distance, time, energyCost)

activate DB
deactivate DB


TASK -> PT: printFileDelivery(path, distance, time, energyCost, deliveryID, outputFileName, actualBatteryWH, payload, scooterID, courierNIF, pharmacyCords)
activate PT
deactivate PT

TASK -> DB: takeVehicleEnergy(scooterID, energyCost, pharmacyID)

activate DB
deactivate DB


TASK -> DB: updateOrdersDeliveryID(pharmacyOrders, deliveryID)
activate DB
deactivate DB

alt if !remainingPath.isEmpty()
ref over TASK: SD_TratarRemainingPath_UC5

end

TASK -> TASK: changeStates(courierNIF, scooterID, pharmacyID)
activate TASK
deactivate TASK

TASK -> PT: printPhisics(outputFileName, VehicleType.SCOOTER)
activate PT
deactivate PT


TASK -> DB: updateOrderStateToDelivered(deliveryID)

activate DB
deactivate DB

end

TASK -> QU: clearQueue()
activate QU
deactivate QU

deactivate TASK






@enduml

PlantUML version 1.2021.00(Sun Jan 10 10:25:05 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>